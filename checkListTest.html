<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
	<head> 
		<title>Marjon Induction</title>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.css" />
		<link rel="stylesheet" href="css/induction_theme.css" />
		<link rel="stylesheet" href="css/custom_style.css" />
		<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
		<script type="text/javascript" src="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.js"></script>
		<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
		<script src="phonegap.js"></script>
		<!--<script src="scripts/jquery.ui.map.js"></script>-->
	</head> 
	
	<body> 

		<div data-role="page" data-theme="a" id="checkListTest">
			<script>
            $(function() {
            
                // detect when a checkbox is changed and save the form to localStorage
                $("input[type='checkbox']").bind( "change", function(event, ui) {
                
                    // set a flag so device knows data is saved
                    localStorage.setItem("checkflag", "set");
            
                    // loop through the form and save checkbox values to localStorage
                    $("#testCheck").find(':input').each(function(i){
                        var theKey = $(this).attr('name');	
                        var theVal = $(this).is(":checked");
                        localStorage.setItem(theKey, theVal);
                    });
                });
                            
                // Test if there is already saved data	
                if (localStorage.getItem("checkflag") == "set") {
                        
                        // loop through the form and update checkbox values from localStorage
                        $("#testCheck").find(':input').each(function(i){
                            var theKey = $(this).attr('name');	
                            var theVal = localStorage.getItem(theKey);
                           if (theVal == "false") {
                                $("[name='" + theKey +"']").attr('checked', false);
                                $("[name='" + theKey +"']").attr('checked', false).checkboxradio("refresh");
                                
                            } else {
                                $("[name='" + theKey +"']").attr('checked', true);
                                $("[name='" + theKey +"']").attr('checked', true).checkboxradio("refresh");
                            }
                        });
                }		
            });
            
            </script>		
			<div data-role="header" id="regHead">
				<a href="#" id="menuBtn" class="ui-btn-left"><img src="images/ui/panelMenuIcon.png" alt="Display Menu" /></a>
				<h1>Marjon Induction</h1>
			</div><!-- /header -->
		
			<div data-role="content">
				<p id="checkMessage">This is a test of the induxtion app checklist functionality. The idea being students can tick stuff off which is remembered after the app is closed.</p>
				<form id="testCheck" name="testCheck">
                   <fieldset data-role="controlgroup">
                    <legend>Registration Checklist:</legend>
                    <input type="checkbox" name="checkbox-1a" id="checkbox-1a">
                    <label for="checkbox-1a">Passport</label>
                    <input type="checkbox" name="checkbox-2a" id="checkbox-2a">
                    <label for="checkbox-2a">Welcome Letter</label>
                    
                    <input type="checkbox" name="checkbox-4a" id="checkbox-4a">
                    <label for="checkbox-4a">Document X</label>
                </fieldset>   
                
                <fieldset data-role="controlgroup" data-type="horizontal">
                    <input type="checkbox" name="checkbox-3a" id="checkbox-3a">
                    <label for="checkbox-3a">Finance Agreement</label>
                    <input type="checkbox" name="checkbox-3b" id="checkbox-3b">
                    <label for="checkbox-3b">?</label>
                    </fieldset>
                </form>
               
			</div><!-- /content -->
			
			<div id="footerBar" data-role="footer" data-id="footerMob" data-position="fixed">
				<img src="images/indented_marjon_logo.png" alt="The University of St. Mark &amp; St. John" id="indexFooterLogo" />
			</div><!-- /footer -->
		
		</div><!-- /page -->
	</body>
	
</html>
